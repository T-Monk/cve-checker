import React, {PropTypes} from 'react';
import {connect} from 'react-redux';
import DownloadPageComponent from '../../components/download/DownloadPageComponent';
import * as downloadActions from '../../actions/downloadActions';
import * as ajaxActions from '../../actions/ajax';

const mapStateToProps = state => {
  return {
    download: state.download
  };
};

const mapDispatchToProps = dispatch => {
  return {
    onChangePath: evt => dispatch(downloadActions.setPath(evt.target.value)),
    onClickDownload: path => dispatch(ajaxActions.downloadCVEs(path))
  };
};

const mergeProps = (stateProps, dispatchProps) => {
  return Object.assign({}, stateProps, Object.assign({}, dispatchProps, {
      onClickDownload: () => dispatchProps.onClickDownload(stateProps.download.path)
    })
  );
};

export default connect(mapStateToProps, mapDispatchToProps, mergeProps)(
  DownloadPageComponent
);
