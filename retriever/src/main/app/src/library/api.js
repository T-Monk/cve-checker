export class API {
  get(url) {
    return fetch(url, {
      method: 'GET',
      credentials: "same-origin",
      mode: "no-cors"
    });
  }

  post(url, body, mode) {
    return fetch(url, {
      method: "POST",
      mode: mode,
      cache: "no-cache",
      credentials: "same-origin",
      headers: {
        "Content-Type": "application/json; charset=utf-8"
      },
      redirect: "follow",
      referrer: "no-referrer",
      body: body
    });
  }

  getDownloadCVEs(path = "") {
    const endpoint = "http://localhost:8080/api/v1/download/cves/latest";
    const body = JSON.stringify({"path": path});
    const mode = "cors";

    return this.post(endpoint, body, mode).then(r => {
      if (r.status === 200 || r.status === 304) {
        return r.json();
      }
      throw new Error("Error downloading CVEs.");
    });
  }
}
